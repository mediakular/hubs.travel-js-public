(()=>{var K=Object.create;var G=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var ee=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty;var L=(e,o)=>()=>(e&&(o=e(e=0)),o);var R=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports);var oe=(e,o,t,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of Z(o))!te.call(e,n)&&n!==t&&G(e,n,{get:()=>o[n],enumerable:!(s=X(o,n))||s.enumerable});return e};var ne=(e,o,t)=>(t=e!=null?K(ee(e)):{},oe(o||!e||!e.__esModule?G(t,"default",{value:e,enumerable:!0}):t,e));function B(e){let o=document.querySelectorAll(".room-price-data"),t=Array.from(o).map(s=>JSON.parse(s.textContent));return e?t.filter(s=>s.editionSlug===e):t}function I(e,o){return!e||!o?0:Math.floor((o-e)/(1e3*60*60*24*30))}function g(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e)}var F=L(()=>{});function H(){document.querySelectorAll("[data-trigger]").forEach(t=>{t.addEventListener("change",()=>o(t)),o(t)});function o(t){let s=t.getAttribute("data-trigger"),n=t.value;document.querySelectorAll(`[data-condition-trigger="${s}"]`).forEach(i=>{let l=i.getAttribute("data-condition-value")===n,d=i.matches("input, select, textarea")?i:i.querySelector("input, select, textarea");i.style.display=l?"block":"none",d&&(d.required=l,l||(d.value=""))})}}function V(){document.querySelectorAll("[data-custom-dropdown]").forEach(e=>{let o=document.createElement("input");o.type="hidden",o.name=e.dataset.name||"custom-dropdown",o.setAttribute("required",e.dataset.required==="true"||!1),o.value="",e.appendChild(o);let t=e.querySelector(".dropdown-selected-value");e.querySelectorAll(".dropdown-item").forEach(n=>{n.addEventListener("click",a=>{a.preventDefault();let i=n.dataset.value,l=n.cloneNode(!0);l.style.padding=0,t.innerHTML="",t.appendChild(l),o.value=i})})})}function N(e,o){let t=document.querySelector(e),s=new DateRangePicker(t,{format:"dd. MM yyyy"});t.addEventListener("changeDate",()=>{let[n,a]=s.getDates(),i=document.querySelector(o);n&&a&&Math.floor((a-n)/864e5)<30?(i.setCustomValidity("You need to choose a minimum of 30 days."),s.setDates(n,new Date(n.getTime()+30*24*60*60*1e3))):i.setCustomValidity(""),i.reportValidity()})}function U(){let e=document.querySelectorAll(".form-step"),o=document.querySelectorAll(".form-wizard-step .form-wizard-step-progress"),t=0;function s(d){e.forEach((c,r)=>{c.style.display=r===d?"block":"none"}),o.forEach((c,r)=>{r<d||r===d?c.classList.add("active"):c.classList.remove("active")})}function n(){let d=e[t].querySelectorAll("input, select, textarea"),c=[];return d.forEach(r=>{let m=r.type==="hidden"||r.offsetParent===null;if(r.required&&(!r.value||r.value.trim()==="")){let f=r.dataset.name||r.name||r.placeholder||"Unnamed field";c.push(`${f} is required.`)}if(!m&&r.value&&!r.checkValidity()){let p=r.name||r.placeholder||"Unnamed field";c.push(`${p} is invalid.`)}}),c}function a(d,c){let r=document.querySelector(d);if(!r)return;r.innerHTML="";let m=document.createElement("ul");c.forEach(p=>{let f=document.createElement("li");f.textContent=p,m.appendChild(f)}),r.appendChild(m)}function i(d){let c=document.querySelector(d);c&&(c.innerHTML="")}document.querySelectorAll(".form-next-step-btn").forEach(d=>{d.addEventListener("click",()=>{if(d.getAttribute("disabled")==="true")return;let c=n(),r=`#error-list-step-${t}`;i(r),c.length==0?(t=Math.min(t+1,e.length-1),t===e.length-1&&l(),s(t)):a(r,c)})});function l(){document.querySelectorAll('[id^="review-"]').forEach(c=>{let r=c.dataset.fieldname;try{let m=document.querySelector(`[name="${r}"]`).value;c.innerText=m}catch{}})}document.querySelectorAll(".form-previous-step-btn").forEach(d=>{d.addEventListener("click",()=>{t=Math.max(t-1,0),s(t)})}),s(t)}var z=L(()=>{});function O(){document.getElementById("close-button").addEventListener("click",function(){let e=document.referrer,o=window.location.hostname,t=null;try{t=e?new URL(e).hostname:null}catch{t=null}window.history.length>1&&t===o?window.history.back():window.location.href="/"})}var W=L(()=>{});var j=R(()=>{F();z();W();document.addEventListener("DOMContentLoaded",function(){O(),H(),U(),V(),N("#dates-start-end-group","#Start-Date"),se(),ie(),re(),ce()});function re(){let e=new URLSearchParams(window.location.search),o=e.get("destination"),t=e.get("edition"),s=e.get("room"),n=e.get("guests");o&&P("#destination-dropdown",o,"data-destinationslug");let a=t&&P("#edition-dropdown",t,"data-editionslug");if(s&&P("#room-dropdown",s,"data-roomslug"),n){let i=document.getElementById("Guests");i&&(i.value=n)}if(a){let i=a.dataset.startdate,l=a.dataset.enddate,c=document.querySelector("#dates-start-end-group").rangepicker;c.setOptions({minDate:i,maxDate:l}),c.setDates(i,l)}}function se(){let e=document.querySelector("#destination-dropdown"),o=document.querySelector("#edition-dropdown"),t=o.querySelector(".dropdown-selected-value"),s=t.innerHTML,n=document.querySelector("#room-dropdown"),a=n.querySelector(".dropdown-selected-value"),i=e.querySelectorAll(".dropdown-item"),l=o.querySelectorAll(".dropdown-item"),d=n.querySelectorAll(".dropdown-item");function c(r){t.setAttribute("disabled",r===""?"true":"false"),a.setAttribute("disabled",r===""?"true":"false"),t.innerHTML=s,a.innerHTML=s,[...l,...d].forEach(m=>{let p=m.dataset.destinationslug===r;m.style.display=p?"flex":"none"})}c(""),i.forEach(r=>{r.addEventListener("click",function(){c(this.dataset.destinationslug)})})}function P(e,o,t){let s=document.querySelectorAll(`${e} .dropdown-item`),n=s&&Array.from(s).find(a=>a.getAttribute(t)===o);return n&&n.click(),n}function ie(){let o=document.querySelector("#edition-dropdown").querySelectorAll(".dropdown-item"),t=document.querySelector("#dates-start-end-group");function s(n,a){let i=t.rangepicker;i.setOptions({minDate:n,maxDate:a}),i.setDates(n,a)}o.forEach(n=>{n.addEventListener("click",function(){s(this.dataset.startdate,this.dataset.enddate)})})}function ce(){_(),x(),document.querySelector("#dates-start-end-group").addEventListener("changeDate",()=>{x(),_()}),document.querySelector("#room-dropdown").querySelectorAll(".dropdown-item").forEach(n=>{n.addEventListener("click",()=>{x()})}),document.querySelector("#Guests").addEventListener("change",()=>{x()})}function _(){let o=document.querySelector("#dates-start-end-group").rangepicker,t=document.querySelector(".discount-info-blue"),s=document.querySelector(".discount-info-green"),[n,a]=o.getDates(),i=I(n,a);!n||!a||i<=2?(t.style.display="flex",s.style.display="none"):(t.style.display="none",s.style.display="flex")}function x(){let e=document.querySelectorAll(".price-info-card"),t=document.querySelector("#dates-start-end-group").rangepicker,s=document.querySelector("#destination-dropdown .dropdown-selected-value .dropdown-item"),n=document.querySelector("#edition-dropdown .dropdown-selected-value .dropdown-item"),a=document.querySelector("#room-dropdown .dropdown-selected-value .dropdown-item"),i=document.querySelector("#Guests"),l=s?s.dataset.destinationslug:"",d=n?n.dataset.editionslug:"",c=a?a.dataset.roomslug:"",[r,m]=t.getDates(),p=i?parseInt(i.value):0;if(l&&d&&c&&r&&m&&p>0){let f=B();e.forEach(y=>{y.style.display="flex",de(y,f,d,c,r,m,p)});let q={day:"numeric",month:"short",year:"numeric"},D=r.toLocaleDateString("en-GB",{day:"numeric",month:"short"}).replace(",",""),S=m.toLocaleDateString("en-GB",q).replace(",","");document.querySelectorAll(".total-dates").forEach(y=>y.innerHTML=`${D} - ${S}`)}else e.forEach(f=>f.style.display="none")}function de(e,o,t,s,n,a,i){let l=I(n,a),d=e.querySelector(".room-price"),c=e.querySelector(".room-price-discount"),r=e.querySelector(".room-price-month-desc"),m=e.querySelector(".total-guests"),p=e.querySelector(".total-totalprice"),f=p.firstElementChild,q=e.querySelector(".room-price-breakdown"),D=e.querySelector(".total-dates"),S=document.querySelector("#form-next-step-btn-step-1"),y=S.querySelector("a"),E=o.find(u=>u.editionSlug===t&&u.roomSlug===s),M=e.querySelectorAll(".price-info-card-title"),T=document.querySelector('[name="Total-Price"]');if(!E){q.innerText="No room price found for the selected season or room.",p.style.display="none",d.style.display="none",c.style.display="none",m.parentElement.style.display="none",D.style.display="none",r.style.display="none",y.style.pointerEvents="none",y.style.backgroundColor="var(--_colors---light-silver)",y.style.opacity=.3,S.setAttribute("disabled",!0),M.forEach(u=>u.style.display="none"),T.value=0;return}p.style.display="block",d.style.display="block",m.parentElement.style.display="flex",D.style.display="block",r.style.display="block",y.style.pointerEvents="auto",y.style.backgroundColor="var(--_colors---primary)",y.style.opacity=1,S.setAttribute("disabled",!1),M.forEach(u=>u.style.display="block");let v=E.basePrice,J=E.discountMonth2,Q=E.discountMonth3,w=0,b=[],$=0,Y=u=>u===1?"st":u===2?"nd":u===3?"rd":"th";l>=1&&(w+=v*i,b.push(`Month 1: ${g(v)}`),c.style.display="none",d.innerText=`${g(w)}`,r.innerText="1st month");for(let u=2;u<=l;u++){let h=0;u===2?h=J:u>=3&&(h=Q);let A=v*(1-h/100)*i;w+=A,b.push(`Month ${u}: ${g(A)}`);let C=u<=3?`${u}${Y(u)} month`:"from 3rd month";h>0&&(c.innerText=`${h.toFixed(1)}% discount - ${C}`,c.style.display="flex"),d.innerHTML=`${g(A)}`,r.innerText=C,$=h}let k=(a-n)/(1e3*60*60*24)-l*30;if(k>0){let h=v*(1-$/100)/30*k*i;w+=h,b.push(`+ ${Math.round(k)} days: ${g(h)}`)}q.innerHTML=b.join("<br>"),m.innerText=`${i} x Person`,f.innerText=`${g(w)}`,T.value=`${g(w)}`}});var ae=R(()=>{var Se=ne(j())});ae();})();
