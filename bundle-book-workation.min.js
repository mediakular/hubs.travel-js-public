(()=>{var Z=Object.create;var B=Object.defineProperty;var ee=Object.getOwnPropertyDescriptor;var te=Object.getOwnPropertyNames;var oe=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty;var M=(e,t)=>()=>(e&&(t=e(e=0)),t);var R=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var re=(e,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of te(t))!ne.call(e,n)&&n!==o&&B(e,n,{get:()=>t[n],enumerable:!(i=ee(t,n))||i.enumerable});return e};var se=(e,t,o)=>(o=e!=null?Z(oe(e)):{},re(t||!e||!e.__esModule?B(o,"default",{value:e,enumerable:!0}):o,e));function F(e){let t=document.querySelectorAll(".room-price-data"),o=Array.from(t).map(i=>JSON.parse(i.textContent));return e?o.filter(i=>i.editionSlug===e):o}function P(e,t){return!e||!t?0:Math.floor((t-e)/(1e3*60*60*24*30))}function w(e,t){return new Intl.NumberFormat("de-DE",{style:"currency",currency:t,currencyDisplay:"code"}).format(e)}var H=M(()=>{});function V(){document.querySelectorAll("[data-trigger]").forEach(o=>{o.addEventListener("change",()=>t(o)),t(o)});function t(o){let i=o.getAttribute("data-trigger"),n=o.value;document.querySelectorAll(`[data-condition-trigger="${i}"]`).forEach(s=>{let d=s.getAttribute("data-condition-value")===n,l=s.matches("input, select, textarea")?s:s.querySelector("input, select, textarea");s.style.display=d?"block":"none",l&&(l.required=d,d||(l.value=""))})}}function N(){document.querySelectorAll("[data-custom-dropdown]").forEach(e=>{let t=document.createElement("input");t.type="hidden",t.name=e.dataset.name||"custom-dropdown",t.setAttribute("required",e.dataset.required==="true"||!1),t.value="",e.appendChild(t);let o=e.querySelector(".dropdown-selected-value");e.querySelectorAll(".dropdown-item").forEach(n=>{n.addEventListener("click",a=>{a.preventDefault();let s=n.dataset.value,d=n.cloneNode(!0);d.style.padding=0,o.innerHTML="",o.appendChild(d),t.value=s})})})}function U(e,t,o=30){let i=document.querySelector(e),n=document.querySelector(t),a=new DateRangePicker(i,{format:"dd. MM yyyy"}),s=o;return a.setMinimumDays=d=>{s=d,console.log(`Minimum days updated to: ${s}`)},i.addEventListener("changeDate",()=>{let[d,l]=a.getDates();if(d&&l){let c=Math.floor((l-d)/864e5);console.log("Date changed",`date difference: ${c} days`,`minimum days: ${s}`),c<s?(n.setCustomValidity(`You need to choose a minimum of ${s} days.`),a.setDates(d,new Date(d.getTime()+s*24*60*60*1e3))):n.setCustomValidity("")}else n.setCustomValidity("");n.reportValidity()}),{rangepicker:a,datesInput:i,startDateField:n}}function z(){let e=document.querySelectorAll(".form-step"),t=document.querySelectorAll(".form-wizard-step .form-wizard-step-progress"),o=0;function i(l){e.forEach((c,r)=>{c.style.display=r===l?"block":"none"}),t.forEach((c,r)=>{r<l||r===l?c.classList.add("active"):c.classList.remove("active")})}function n(){let l=e[o].querySelectorAll("input, select, textarea"),c=[];return l.forEach(r=>{let m=r.type==="hidden"||r.offsetParent===null;if(r.required&&(!r.value||r.value.trim()==="")){let y=r.dataset.name||r.name||r.placeholder||"Unnamed field";c.push(`${y} is required.`)}if(!m&&r.value&&!r.checkValidity()){let p=r.name||r.placeholder||"Unnamed field";c.push(`${p} is invalid.`)}}),c}function a(l,c){let r=document.querySelector(l);if(!r)return;r.innerHTML="";let m=document.createElement("ul");c.forEach(p=>{let y=document.createElement("li");y.textContent=p,m.appendChild(y)}),r.appendChild(m)}function s(l){let c=document.querySelector(l);c&&(c.innerHTML="")}document.querySelectorAll(".form-next-step-btn").forEach(l=>{l.addEventListener("click",()=>{if(l.getAttribute("disabled")==="true")return;let c=n(),r=`#error-list-step-${o}`;s(r),c.length==0?(o=Math.min(o+1,e.length-1),o===e.length-1&&d(),i(o)):a(r,c)})});function d(){document.querySelectorAll('[id^="review-"]').forEach(c=>{let r=c.dataset.fieldname;try{let m=document.querySelector(`[name="${r}"]`).value;c.innerText=m}catch{}})}document.querySelectorAll(".form-previous-step-btn").forEach(l=>{l.addEventListener("click",()=>{o=Math.max(o-1,0),i(o)})}),i(o)}var O=M(()=>{});function W(){document.getElementById("close-button").addEventListener("click",function(){let e=document.referrer,t=window.location.hostname,o=null;try{o=e?new URL(e).hostname:null}catch{o=null}window.history.length>1&&o===t?window.history.back():window.location.href="/"})}var _=M(()=>{});var Q=R(()=>{H();O();_();var h="EUR",J=null;document.addEventListener("DOMContentLoaded",function(){W(),V(),z(),N(),J=U("#dates-start-end-group","#Start-Date"),ce(),ae(),ie(),le()});function ie(){let e=new URLSearchParams(window.location.search),t=e.get("destination"),o=e.get("edition"),i=e.get("room"),n=e.get("guests");t&&I("#destination-dropdown",t,"data-destinationslug");let a=o&&I("#edition-dropdown",o,"data-editionslug");if(i&&I("#room-dropdown",i,"data-roomslug"),n){let s=document.getElementById("Guests");s&&(s.value=n)}if(a){let s=a.dataset.startdate,d=a.dataset.enddate,c=document.querySelector("#dates-start-end-group").rangepicker;c.setOptions({minDate:s,maxDate:d}),c.setDates(s,d)}}function ce(){let e=document.querySelector("#destination-dropdown"),t=document.querySelector("#edition-dropdown"),o=t.querySelector(".dropdown-selected-value"),i=o.innerHTML,n=document.querySelector("#room-dropdown"),a=n.querySelector(".dropdown-selected-value"),s=e.querySelectorAll(".dropdown-item"),d=t.querySelectorAll(".dropdown-item"),l=n.querySelectorAll(".dropdown-item");function c(r,m){o.setAttribute("disabled",r===""?"true":"false"),a.setAttribute("disabled",r===""?"true":"false"),o.innerHTML=i,a.innerHTML=i,h=m,[...d,...l].forEach(p=>{let y=p.dataset.destinationslug===r;p.style.display=y?"flex":"none"})}c("",h),s.forEach(r=>{r.addEventListener("click",function(){c(this.dataset.destinationslug,this.dataset.currency)})})}function I(e,t,o){let i=document.querySelectorAll(`${e} .dropdown-item`),n=i&&Array.from(i).find(a=>a.getAttribute(o)===t);return n&&n.click(),n}function ae(){let t=document.querySelector("#edition-dropdown").querySelectorAll(".dropdown-item"),o=document.querySelector("#dates-start-end-group");function i(n,a){let s=o.rangepicker;s.setOptions({minDate:n,maxDate:a}),s.setDates(n,a)}t.forEach(n=>{n.addEventListener("click",function(){i(this.dataset.startdate,this.dataset.enddate)})})}function le(){j(),x(),document.querySelector("#dates-start-end-group").addEventListener("changeDate",()=>{x(),j()}),document.querySelector("#room-dropdown").querySelectorAll(".dropdown-item").forEach(n=>{n.addEventListener("click",()=>{x();let a=n.getAttribute("data-allow-weekly-booking"),s=J.rangepicker;console.log("changing allowWeeklyBooking to:",a==="Enabled"?7:30),s.setMinimumDays(a==="Enabled"?7:30)})}),document.querySelector("#Guests").addEventListener("change",()=>{x()})}function j(){let t=document.querySelector("#dates-start-end-group").rangepicker,o=document.querySelector(".discount-info-blue"),i=document.querySelector(".discount-info-green"),[n,a]=t.getDates(),s=P(n,a);!n||!a||s<=2?(o.style.display="flex",i.style.display="none"):(o.style.display="none",i.style.display="flex")}function x(){let e=document.querySelectorAll(".price-info-card"),o=document.querySelector("#dates-start-end-group").rangepicker,i=document.querySelector("#destination-dropdown .dropdown-selected-value .dropdown-item"),n=document.querySelector("#edition-dropdown .dropdown-selected-value .dropdown-item"),a=document.querySelector("#room-dropdown .dropdown-selected-value .dropdown-item"),s=document.querySelector("#Guests"),d=i?i.dataset.destinationslug:"",l=n?n.dataset.editionslug:"",c=a?a.dataset.roomslug:"",[r,m]=o.getDates(),p=s?parseInt(s.value):0;if(d&&l&&c&&r&&m&&p>0){let y=F();e.forEach(f=>{f.style.display="flex",de(f,y,l,c,r,m,p)});let q={day:"numeric",month:"short",year:"numeric"},E=r.toLocaleDateString("en-GB",{day:"numeric",month:"short"}).replace(",",""),D=m.toLocaleDateString("en-GB",q).replace(",","");document.querySelectorAll(".total-dates").forEach(f=>f.innerHTML=`${E} - ${D}`)}else e.forEach(y=>y.style.display="none")}function de(e,t,o,i,n,a,s){let d=P(n,a),l=e.querySelector(".room-price"),c=e.querySelector(".room-price-discount"),r=e.querySelector(".room-price-month-desc"),m=e.querySelector(".total-guests"),p=e.querySelector(".total-totalprice"),y=p.firstElementChild,q=e.querySelector(".room-price-breakdown"),E=e.querySelector(".total-dates"),D=document.querySelector("#form-next-step-btn-step-1"),f=D.querySelector("a"),v=t.find(u=>u.editionSlug===o&&u.roomSlug===i),$=e.querySelectorAll(".price-info-card-title"),T=document.querySelector('[name="Total-Price"]');if(!v){q.innerText="No room price found for the selected season or room.",p.style.display="none",l.style.display="none",c.style.display="none",m.parentElement.style.display="none",E.style.display="none",r.style.display="none",f.style.pointerEvents="none",f.style.backgroundColor="var(--_colors---light-silver)",f.style.opacity=.3,D.setAttribute("disabled",!0),$.forEach(u=>u.style.display="none"),T.value=0;return}p.style.display="block",l.style.display="block",m.parentElement.style.display="flex",E.style.display="block",r.style.display="block",f.style.pointerEvents="auto",f.style.backgroundColor="var(--_colors---primary)",f.style.opacity=1,D.setAttribute("disabled",!1),$.forEach(u=>u.style.display="block");let k=v.basePrice,Y=v.discountMonth2,K=v.discountMonth3,S=0,b=[],C=0,X=u=>u===1?"st":u===2?"nd":u===3?"rd":"th";d>=1&&(S+=k*s,b.push(`Month 1: ${w(k,h)}`),c.style.display="none",l.innerText=`${w(S,h)}`,r.innerText="1st month");for(let u=2;u<=d;u++){let g=0;u===2?g=Y:u>=3&&(g=K);let L=k*(1-g/100)*s;S+=L,b.push(`Month ${u}: ${w(L,h)}`);let G=u<=3?`${u}${X(u)} month`:"from 3rd month";g>0&&(c.innerText=`${g.toFixed(1)}% discount - ${G}`,c.style.display="flex"),l.innerHTML=`${w(L,h)}`,r.innerText=G,C=g}let A=(a-n)/(1e3*60*60*24)-d*30;if(A>0){let g=k*(1-C/100)/30*A*s;S+=g,b.push(`+ ${Math.round(A)} days: ${w(g,h)}`)}q.innerHTML=b.join("<br>"),m.innerText=`${s} x Person`,y.innerText=`${w(S,h)}`,T.value=`${w(S,h)}`}});var ue=R(()=>{var qe=se(Q())});ue();})();
//# sourceMappingURL=bundle-book-workation.min.js.map
