(()=>{var oe=Object.create;var H=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var re=Object.getOwnPropertyNames;var se=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty;var I=(e,t)=>()=>(e&&(t=e(e=0)),t);var N=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ce=(e,t,o,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of re(t))!ie.call(e,n)&&n!==o&&H(e,n,{get:()=>t[n],enumerable:!(s=ne(t,n))||s.enumerable});return e};var ae=(e,t,o)=>(o=e!=null?oe(se(e)):{},ce(t||!e||!e.__esModule?H(o,"default",{value:e,enumerable:!0}):o,e));function V(e){let t=document.querySelectorAll(".room-price-data"),o=Array.from(t).map(s=>JSON.parse(s.textContent));return e?o.filter(s=>s.editionSlug===e):o}function $(e,t){return!e||!t?0:Math.floor((t-e)/(1e3*60*60*24*30))}function h(e,t){return new Intl.NumberFormat("de-DE",{style:"currency",currency:t,currencyDisplay:"code"}).format(e)}function U(e,t=null){return isNaN(parseFloat(e))?t:parseFloat(e)}var W=I(()=>{});function z(){document.querySelectorAll("[data-trigger]").forEach(o=>{o.addEventListener("change",()=>t(o)),t(o)});function t(o){let s=o.getAttribute("data-trigger"),n=o.value;document.querySelectorAll(`[data-condition-trigger="${s}"]`).forEach(a=>{let d=a.getAttribute("data-condition-value")===n,i=a.matches("input, select, textarea")?a:a.querySelector("input, select, textarea");a.style.display=d?"block":"none",i&&(i.required=d,d||(i.value=""))})}}function O(){document.querySelectorAll("[data-custom-dropdown]").forEach(e=>{let t=document.createElement("input");t.type="hidden",t.name=e.dataset.name||"custom-dropdown",t.setAttribute("required",e.dataset.required==="true"||!1),t.value="",e.appendChild(t);let o=e.querySelector(".dropdown-selected-value");e.querySelectorAll(".dropdown-item").forEach(n=>{n.addEventListener("click",c=>{c.preventDefault();let a=n.dataset.value,d=n.cloneNode(!0);d.style.padding=0,o.innerHTML="",o.appendChild(d),t.value=a})})})}function _(e,t,o=30){let s=document.querySelector(e),n=document.querySelector(t),c=new DateRangePicker(s,{format:"dd. MM yyyy"}),a=o;return c.setMinimumDays=d=>{a=d},c.validateDateRange=()=>{let[d,i]=c.getDates();d&&i&&Math.floor((i-d)/864e5)<a?(n.setCustomValidity(`You need to choose a minimum of ${a} days.`),c.setDates(d,new Date(d.getTime()+a*24*60*60*1e3))):n.setCustomValidity(""),n.reportValidity()},s.addEventListener("changeDate",c.validateDateRange),{rangepicker:c,datesInput:s,startDateField:n}}function j(){let e=document.querySelectorAll(".form-step"),t=document.querySelectorAll(".form-wizard-step .form-wizard-step-progress"),o=0;function s(i){e.forEach((l,r)=>{l.style.display=r===i?"block":"none"}),t.forEach((l,r)=>{r<i||r===i?l.classList.add("active"):l.classList.remove("active")})}function n(){let i=e[o].querySelectorAll("input, select, textarea"),l=[];return i.forEach(r=>{let m=r.type==="hidden"||r.offsetParent===null;if(r.required&&(!r.value||r.value.trim()==="")){let y=r.dataset.name||r.name||r.placeholder||"Unnamed field";l.push(`${y} is required.`)}if(!m&&r.value&&!r.checkValidity()){let p=r.name||r.placeholder||"Unnamed field";l.push(`${p} is invalid.`)}}),l}function c(i,l){let r=document.querySelector(i);if(!r)return;r.innerHTML="";let m=document.createElement("ul");l.forEach(p=>{let y=document.createElement("li");y.textContent=p,m.appendChild(y)}),r.appendChild(m)}function a(i){let l=document.querySelector(i);l&&(l.innerHTML="")}document.querySelectorAll(".form-next-step-btn").forEach(i=>{i.addEventListener("click",()=>{if(i.getAttribute("disabled")==="true")return;let l=n(),r=`#error-list-step-${o}`;a(r),l.length==0?(o=Math.min(o+1,e.length-1),o===e.length-1&&d(),s(o)):c(r,l)})});function d(){document.querySelectorAll('[id^="review-"]').forEach(l=>{let r=l.dataset.fieldname;try{let m=document.querySelector(`[name="${r}"]`).value;l.innerText=m}catch{}})}document.querySelectorAll(".form-previous-step-btn").forEach(i=>{i.addEventListener("click",()=>{o=Math.max(o-1,0),s(o)})}),s(o)}var J=I(()=>{});function Q(){document.getElementById("close-button").addEventListener("click",function(){let e=document.referrer,t=window.location.hostname,o=null;try{o=e?new URL(e).hostname:null}catch{o=null}window.history.length>1&&o===t?window.history.back():window.location.href="/"})}var Y=I(()=>{});var X=N(()=>{W();J();Y();var g="EUR",R=null;document.addEventListener("DOMContentLoaded",function(){Q(),z(),j(),O(),R=_("#dates-start-end-group","#Start-Date"),de(),ue(),me(),le(),pe()});function le(){let e=new URLSearchParams(window.location.search),t=e.get("destination"),o=e.get("edition"),s=e.get("room"),n=e.get("guests");t&&C("#destination-dropdown",t,"data-destinationslug");let c=o&&C("#edition-dropdown",o,"data-editionslug");if(s&&C("#room-dropdown",s,"data-roomslug"),n){let a=document.getElementById("Guests");a&&(a.value=n)}if(c){let a=c.dataset.startdate,d=c.dataset.enddate,i=R.rangepicker;i.setOptions({minDate:a,maxDate:d}),i.setDates(a,d)}}function de(){let e=document.querySelector("#destination-dropdown"),t=document.querySelector("#edition-dropdown"),o=t.querySelector(".dropdown-selected-value"),s=o.innerHTML,n=document.querySelector("#room-dropdown"),c=n.querySelector(".dropdown-selected-value"),a=e.querySelectorAll(".dropdown-item"),d=t.querySelectorAll(".dropdown-item"),i=n.querySelectorAll(".dropdown-item");function l(r,m){o.setAttribute("disabled",r===""?"true":"false"),c.setAttribute("disabled",r===""?"true":"false"),o.innerHTML=s,c.innerHTML=s,g=m,[...d,...i].forEach(p=>{let y=p.dataset.destinationslug===r;p.style.display=y?"flex":"none"})}l("",g),a.forEach(r=>{r.addEventListener("click",function(){l(this.dataset.destinationslug,this.dataset.currency)})})}function C(e,t,o){let s=document.querySelectorAll(`${e} .dropdown-item`),n=s&&Array.from(s).find(c=>c.getAttribute(o)===t);return n&&n.click(),n}function ue(){let t=document.querySelector("#edition-dropdown").querySelectorAll(".dropdown-item"),o=document.querySelector("#dates-start-end-group");function s(n,c){let a=o.rangepicker;a.setOptions({minDate:n,maxDate:c}),a.setDates(n,c)}t.forEach(n=>{n.addEventListener("click",function(){s(this.dataset.startdate,this.dataset.enddate)})})}function me(){document.querySelector("#dates-start-end-group").addEventListener("changeDate",()=>{P(),K()}),document.querySelector("#room-dropdown").querySelectorAll(".dropdown-item").forEach(n=>{n.addEventListener("click",()=>{P();let c=n.getAttribute("data-allow-weekly-booking"),a=R.rangepicker;a.setMinimumDays(c==="Enabled"?7:30),a.validateDateRange()})}),document.querySelector("#Guests").addEventListener("change",()=>{P()})}function pe(){K(),P()}function K(){let t=document.querySelector("#dates-start-end-group").rangepicker,o=document.querySelector(".discount-info-blue"),s=document.querySelector(".discount-info-green"),[n,c]=t.getDates(),a=$(n,c);!n||!c||a<=2?(o.style.display="flex",s.style.display="none"):(o.style.display="none",s.style.display="flex")}function P(){let e=document.querySelectorAll(".price-info-card"),o=document.querySelector("#dates-start-end-group").rangepicker,s=document.querySelector("#destination-dropdown .dropdown-selected-value .dropdown-item"),n=document.querySelector("#edition-dropdown .dropdown-selected-value .dropdown-item"),c=document.querySelector("#room-dropdown .dropdown-selected-value .dropdown-item"),a=document.querySelector("#Guests"),d=s?s.dataset.destinationslug:"",i=n?n.dataset.editionslug:"",l=c?c.dataset.roomslug:"",r=c?c.getAttribute("data-allow-weekly-booking")==="Enabled":!1,[m,p]=o.getDates(),y=a?parseInt(a.value):0;if(d&&i&&l&&m&&p&&y>0){let D=V();e.forEach(f=>{f.style.display="flex",ye(f,D,i,l,m,p,y,r)});let k={day:"numeric",month:"short",year:"numeric"},b=m.toLocaleDateString("en-GB",{day:"numeric",month:"short"}).replace(",",""),q=p.toLocaleDateString("en-GB",k).replace(",","");document.querySelectorAll(".total-dates").forEach(f=>f.innerHTML=`${b} - ${q}`)}else e.forEach(D=>D.style.display="none")}function ye(e,t,o,s,n,c,a,d){let i=$(n,c),l=e.querySelector(".room-price"),r=e.querySelector(".room-price-discount"),m=e.querySelector(".room-price-month-desc"),p=e.querySelector(".total-guests"),y=e.querySelector(".total-totalprice"),D=y.firstElementChild,k=e.querySelector(".room-price-breakdown"),b=e.querySelector(".total-dates"),q=document.querySelector("#form-next-step-btn-step-1"),f=q.querySelector("a"),E=t.find(u=>u.editionSlug===o&&u.roomSlug===s),G=e.querySelectorAll(".price-info-card-title"),B=document.querySelector('[name="Total-Price"]');if(!E){k.innerText="No room price found for the selected season or room.",y.style.display="none",l.style.display="none",r.style.display="none",p.parentElement.style.display="none",b.style.display="none",m.style.display="none",f.style.pointerEvents="none",f.style.backgroundColor="var(--_colors---light-silver)",f.style.opacity=.3,q.setAttribute("disabled",!0),G.forEach(u=>u.style.display="none"),B.value=0;return}y.style.display="block",l.style.display="block",p.parentElement.style.display="flex",b.style.display="block",m.style.display="block",f.style.pointerEvents="auto",f.style.backgroundColor="var(--_colors---primary)",f.style.opacity=1,q.setAttribute("disabled",!1),G.forEach(u=>u.style.display="block");let L=U(E.basePriceWeek),M=E.basePriceMonth,Z=E.discountMonth2,ee=E.discountMonth3,S=0,x=[],F=0,te=u=>u===1?"st":u===2?"nd":u===3?"rd":"th";if(i<1&&d&&L){let u=L;r.style.display="none",l.innerText=`${h(u,g)}`,m.innerText="per week"}else i>=1&&(S+=M,x.push(`Month 1: ${h(S,g)}`),r.style.display="none",l.innerText=`${h(S,g)}`,m.innerText="1st month");for(let u=2;u<=i;u++){let w=0;u===2?w=Z:u>=3&&(w=ee);let A=M*(1-w/100);S+=A,x.push(`Month ${u}: ${h(A,g)}`);let v=u<=3?`${u}${te(u)} month`:"from 3rd month";w>0&&(r.innerText=`${w.toFixed(1)}% discount - ${v}`,r.style.display="flex"),l.innerHTML=`${h(A,g)}`,m.innerText=v,F=w}let T=(c-n)/(1e3*60*60*24)-i*30;if(T>0){let u=i>=1?M:L,w=i>=1?30:7,v=u*(1-F/100)/w*T;S+=v,x.push(`${i>=1?"+":""} ${Math.round(T)} days: ${h(v,g)}`)}k.innerHTML=x.join("<br>"),p.innerText=`${a} x Person`,D.innerText=`${h(S,g)}`,B.value=`${h(S,g)}`}});var fe=N(()=>{var be=ae(X())});fe();})();
//# sourceMappingURL=bundle-book-workation.min.js.map
