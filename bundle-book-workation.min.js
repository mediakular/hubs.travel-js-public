(()=>{var ee=Object.create;var F=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var oe=Object.getOwnPropertyNames;var ne=Object.getPrototypeOf,re=Object.prototype.hasOwnProperty;var M=(e,t)=>()=>(e&&(t=e(e=0)),t);var H=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var se=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of oe(t))!re.call(e,n)&&n!==o&&F(e,n,{get:()=>t[n],enumerable:!(r=te(t,n))||r.enumerable});return e};var ce=(e,t,o)=>(o=e!=null?ee(ne(e)):{},se(t||!e||!e.__esModule?F(o,"default",{value:e,enumerable:!0}):o,e));function V(e){let t=document.querySelectorAll(".room-price-data"),o=Array.from(t).map(r=>JSON.parse(r.textContent));return e?o.filter(r=>r.editionSlug===e):o}function T(e,t){return!e||!t?0:Math.floor((t-e)/(1e3*60*60*24*30))}function w(e,t){return new Intl.NumberFormat("de-DE",{style:"currency",currency:t,currencyDisplay:"code"}).format(e)}var N=M(()=>{});function U(){document.querySelectorAll("[data-trigger]").forEach(o=>{o.addEventListener("change",()=>t(o)),t(o)});function t(o){let r=o.getAttribute("data-trigger"),n=o.value;document.querySelectorAll(`[data-condition-trigger="${r}"]`).forEach(c=>{let u=c.getAttribute("data-condition-value")===n,d=c.matches("input, select, textarea")?c:c.querySelector("input, select, textarea");c.style.display=u?"block":"none",d&&(d.required=u,u||(d.value=""))})}}function z(){document.querySelectorAll("[data-custom-dropdown]").forEach(e=>{let t=document.createElement("input");t.type="hidden",t.name=e.dataset.name||"custom-dropdown",t.setAttribute("required",e.dataset.required==="true"||!1),t.value="",e.appendChild(t);let o=e.querySelector(".dropdown-selected-value");e.querySelectorAll(".dropdown-item").forEach(n=>{n.addEventListener("click",a=>{a.preventDefault();let c=n.dataset.value,u=n.cloneNode(!0);u.style.padding=0,o.innerHTML="",o.appendChild(u),t.value=c})})})}function O(e,t,o=30){let r=document.querySelector(e),n=document.querySelector(t),a=new DateRangePicker(r,{format:"dd. MM yyyy"});return r.addEventListener("changeDate",x(a,n,o)),{rangepicker:a,datesInput:r,startDateField:n}}function x(e,t,o=30){let[r,n]=e.getDates();r&&n&&Math.floor((n-r)/864e5)<o?(t.setCustomValidity(`You need to choose a minimum of ${o} days.`),e.setDates(r,new Date(r.getTime()+o*24*60*60*1e3))):t.setCustomValidity(""),t.reportValidity()}function W(){let e=document.querySelectorAll(".form-step"),t=document.querySelectorAll(".form-wizard-step .form-wizard-step-progress"),o=0;function r(d){e.forEach((i,s)=>{i.style.display=s===d?"block":"none"}),t.forEach((i,s)=>{s<d||s===d?i.classList.add("active"):i.classList.remove("active")})}function n(){let d=e[o].querySelectorAll("input, select, textarea"),i=[];return d.forEach(s=>{let m=s.type==="hidden"||s.offsetParent===null;if(s.required&&(!s.value||s.value.trim()==="")){let y=s.dataset.name||s.name||s.placeholder||"Unnamed field";i.push(`${y} is required.`)}if(!m&&s.value&&!s.checkValidity()){let p=s.name||s.placeholder||"Unnamed field";i.push(`${p} is invalid.`)}}),i}function a(d,i){let s=document.querySelector(d);if(!s)return;s.innerHTML="";let m=document.createElement("ul");i.forEach(p=>{let y=document.createElement("li");y.textContent=p,m.appendChild(y)}),s.appendChild(m)}function c(d){let i=document.querySelector(d);i&&(i.innerHTML="")}document.querySelectorAll(".form-next-step-btn").forEach(d=>{d.addEventListener("click",()=>{if(d.getAttribute("disabled")==="true")return;let i=n(),s=`#error-list-step-${o}`;c(s),i.length==0?(o=Math.min(o+1,e.length-1),o===e.length-1&&u(),r(o)):a(s,i)})});function u(){document.querySelectorAll('[id^="review-"]').forEach(i=>{let s=i.dataset.fieldname;try{let m=document.querySelector(`[name="${s}"]`).value;i.innerText=m}catch{}})}document.querySelectorAll(".form-previous-step-btn").forEach(d=>{d.addEventListener("click",()=>{o=Math.max(o-1,0),r(o)})}),r(o)}var _=M(()=>{});function j(){document.getElementById("close-button").addEventListener("click",function(){let e=document.referrer,t=window.location.hostname,o=null;try{o=e?new URL(e).hostname:null}catch{o=null}window.history.length>1&&o===t?window.history.back():window.location.href="/"})}var J=M(()=>{});var Y=H(()=>{N();_();J();var g="EUR",L=null;document.addEventListener("DOMContentLoaded",function(){j(),U(),W(),z(),L=O("#dates-start-end-group","#Start-Date"),ae(),de(),ie(),le()});function ie(){let e=new URLSearchParams(window.location.search),t=e.get("destination"),o=e.get("edition"),r=e.get("room"),n=e.get("guests");t&&$("#destination-dropdown",t,"data-destinationslug");let a=o&&$("#edition-dropdown",o,"data-editionslug");if(r&&$("#room-dropdown",r,"data-roomslug"),n){let c=document.getElementById("Guests");c&&(c.value=n)}if(a){let c=a.dataset.startdate,u=a.dataset.enddate,i=document.querySelector("#dates-start-end-group").rangepicker;i.setOptions({minDate:c,maxDate:u}),i.setDates(c,u)}}function ae(){let e=document.querySelector("#destination-dropdown"),t=document.querySelector("#edition-dropdown"),o=t.querySelector(".dropdown-selected-value"),r=o.innerHTML,n=document.querySelector("#room-dropdown"),a=n.querySelector(".dropdown-selected-value"),c=e.querySelectorAll(".dropdown-item"),u=t.querySelectorAll(".dropdown-item"),d=n.querySelectorAll(".dropdown-item");function i(s,m){o.setAttribute("disabled",s===""?"true":"false"),a.setAttribute("disabled",s===""?"true":"false"),o.innerHTML=r,a.innerHTML=r,g=m,[...u,...d].forEach(p=>{let y=p.dataset.destinationslug===s;p.style.display=y?"flex":"none"})}i("",g),c.forEach(s=>{s.addEventListener("click",function(){i(this.dataset.destinationslug,this.dataset.currency)})})}function $(e,t,o){let r=document.querySelectorAll(`${e} .dropdown-item`),n=r&&Array.from(r).find(a=>a.getAttribute(o)===t);return n&&n.click(),n}function de(){let t=document.querySelector("#edition-dropdown").querySelectorAll(".dropdown-item"),o=document.querySelector("#dates-start-end-group");function r(n,a){let c=o.rangepicker;c.setOptions({minDate:n,maxDate:a}),c.setDates(n,a)}t.forEach(n=>{n.addEventListener("click",function(){r(this.dataset.startdate,this.dataset.enddate)})})}function le(){Q(),A(),document.querySelector("#dates-start-end-group").addEventListener("changeDate",()=>{A(),Q()}),document.querySelector("#room-dropdown").querySelectorAll(".dropdown-item").forEach(n=>{n.addEventListener("click",()=>{A();let a=n.getAttribute("data-allow-weekly-booking"),c=L.datesInput;c.removeEventListener("changeDate",x),c.addEventListener("changeDate",x(L.rangepicker,L.startDateField,a==="Enabled"?7:30))})}),document.querySelector("#Guests").addEventListener("change",()=>{A()})}function Q(){let t=document.querySelector("#dates-start-end-group").rangepicker,o=document.querySelector(".discount-info-blue"),r=document.querySelector(".discount-info-green"),[n,a]=t.getDates(),c=T(n,a);!n||!a||c<=2?(o.style.display="flex",r.style.display="none"):(o.style.display="none",r.style.display="flex")}function A(){let e=document.querySelectorAll(".price-info-card"),o=document.querySelector("#dates-start-end-group").rangepicker,r=document.querySelector("#destination-dropdown .dropdown-selected-value .dropdown-item"),n=document.querySelector("#edition-dropdown .dropdown-selected-value .dropdown-item"),a=document.querySelector("#room-dropdown .dropdown-selected-value .dropdown-item"),c=document.querySelector("#Guests"),u=r?r.dataset.destinationslug:"",d=n?n.dataset.editionslug:"",i=a?a.dataset.roomslug:"",[s,m]=o.getDates(),p=c?parseInt(c.value):0;if(u&&d&&i&&s&&m&&p>0){let y=V();e.forEach(f=>{f.style.display="flex",ue(f,y,d,i,s,m,p)});let q={day:"numeric",month:"short",year:"numeric"},E=s.toLocaleDateString("en-GB",{day:"numeric",month:"short"}).replace(",",""),D=m.toLocaleDateString("en-GB",q).replace(",","");document.querySelectorAll(".total-dates").forEach(f=>f.innerHTML=`${E} - ${D}`)}else e.forEach(y=>y.style.display="none")}function ue(e,t,o,r,n,a,c){let u=T(n,a),d=e.querySelector(".room-price"),i=e.querySelector(".room-price-discount"),s=e.querySelector(".room-price-month-desc"),m=e.querySelector(".total-guests"),p=e.querySelector(".total-totalprice"),y=p.firstElementChild,q=e.querySelector(".room-price-breakdown"),E=e.querySelector(".total-dates"),D=document.querySelector("#form-next-step-btn-step-1"),f=D.querySelector("a"),v=t.find(l=>l.editionSlug===o&&l.roomSlug===r),C=e.querySelectorAll(".price-info-card-title"),G=document.querySelector('[name="Total-Price"]');if(!v){q.innerText="No room price found for the selected season or room.",p.style.display="none",d.style.display="none",i.style.display="none",m.parentElement.style.display="none",E.style.display="none",s.style.display="none",f.style.pointerEvents="none",f.style.backgroundColor="var(--_colors---light-silver)",f.style.opacity=.3,D.setAttribute("disabled",!0),C.forEach(l=>l.style.display="none"),G.value=0;return}p.style.display="block",d.style.display="block",m.parentElement.style.display="flex",E.style.display="block",s.style.display="block",f.style.pointerEvents="auto",f.style.backgroundColor="var(--_colors---primary)",f.style.opacity=1,D.setAttribute("disabled",!1),C.forEach(l=>l.style.display="block");let k=v.basePrice,K=v.discountMonth2,X=v.discountMonth3,S=0,b=[],R=0,Z=l=>l===1?"st":l===2?"nd":l===3?"rd":"th";u>=1&&(S+=k*c,b.push(`Month 1: ${w(k,g)}`),i.style.display="none",d.innerText=`${w(S,g)}`,s.innerText="1st month");for(let l=2;l<=u;l++){let h=0;l===2?h=K:l>=3&&(h=X);let P=k*(1-h/100)*c;S+=P,b.push(`Month ${l}: ${w(P,g)}`);let B=l<=3?`${l}${Z(l)} month`:"from 3rd month";h>0&&(i.innerText=`${h.toFixed(1)}% discount - ${B}`,i.style.display="flex"),d.innerHTML=`${w(P,g)}`,s.innerText=B,R=h}let I=(a-n)/(1e3*60*60*24)-u*30;if(I>0){let h=k*(1-R/100)/30*I*c;S+=h,b.push(`+ ${Math.round(I)} days: ${w(h,g)}`)}q.innerHTML=b.join("<br>"),m.innerText=`${c} x Person`,y.innerText=`${w(S,g)}`,G.value=`${w(S,g)}`}});var me=H(()=>{var Ee=ce(Y())});me();})();
//# sourceMappingURL=bundle-book-workation.min.js.map
