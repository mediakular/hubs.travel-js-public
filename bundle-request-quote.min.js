(()=>{function p(){document.querySelectorAll("[data-trigger]").forEach(e=>{e.addEventListener("change",()=>i(e)),i(e)});function i(e){let l=e.getAttribute("data-trigger"),c=e.value;document.querySelectorAll(`[data-condition-trigger="${l}"]`).forEach(s=>{let a=s.getAttribute("data-condition-value")===c,n=s.matches("input, select, textarea")?s:s.querySelector("input, select, textarea");s.style.display=a?"block":"none",n&&(n.required=a,a||(n.value=""))})}}function y(){document.querySelectorAll("[data-custom-dropdown]").forEach(r=>{let i=document.createElement("input");i.type="hidden",i.name=r.dataset.name||"custom-dropdown",i.setAttribute("required",r.dataset.required==="true"||!1),i.value="",r.appendChild(i);let e=r.querySelector(".dropdown-selected-value");r.querySelectorAll(".dropdown-item").forEach(c=>{c.addEventListener("click",d=>{d.preventDefault();let s=c.dataset.value,a=c.cloneNode(!0);a.style.padding=0,e.innerHTML="",e.appendChild(a),i.value=s})})})}function h(r,i,e=30){let l=document.querySelector(r),c=document.querySelector(i),d=new DateRangePicker(l,{format:"dd. MM yyyy"}),s=e;return d.setMinimumDays=a=>{s=a},d.validateDateRange=()=>{let[a,n]=d.getDates();a&&n&&Math.floor((n-a)/864e5)<s?(c.setCustomValidity(`You need to choose a minimum of ${s} days.`),d.setDates(a,new Date(a.getTime()+s*24*60*60*1e3))):c.setCustomValidity(""),c.reportValidity()},l.addEventListener("changeDate",d.validateDateRange),{rangepicker:d,datesInput:l,startDateField:c}}function v(){let r=document.querySelectorAll(".form-step"),i=document.querySelectorAll(".form-wizard-step .form-wizard-step-progress"),e=0;function l(n){r.forEach((o,t)=>{o.style.display=t===n?"block":"none"}),i.forEach((o,t)=>{t<n||t===n?o.classList.add("active"):o.classList.remove("active")})}function c(){let n=r[e].querySelectorAll("input, select, textarea"),o=[];return n.forEach(t=>{let u=t.type==="hidden"||t.offsetParent===null;if(t.required&&(!t.value||t.value.trim()==="")){let f=t.dataset.name||t.name||t.placeholder||"Unnamed field";o.push(`${f} is required.`)}if(!u&&t.value&&!t.checkValidity()){let m=t.name||t.placeholder||"Unnamed field";o.push(`${m} is invalid.`)}}),o}function d(n,o){let t=document.querySelector(n);if(!t)return;t.innerHTML="";let u=document.createElement("ul");o.forEach(m=>{let f=document.createElement("li");f.textContent=m,u.appendChild(f)}),t.appendChild(u)}function s(n){let o=document.querySelector(n);o&&(o.innerHTML="")}document.querySelectorAll(".form-next-step-btn").forEach(n=>{n.addEventListener("click",()=>{if(n.getAttribute("disabled")==="true")return;let o=c(),t=`#error-list-step-${e}`;s(t),o.length==0?(e=Math.min(e+1,r.length-1),e===r.length-1&&a(),l(e)):d(t,o)})});function a(){document.querySelectorAll('[id^="review-"]').forEach(o=>{let t=o.dataset.fieldname;try{let u=document.querySelector(`[name="${t}"]`).value;o.innerText=u}catch{}})}document.querySelectorAll(".form-previous-step-btn").forEach(n=>{n.addEventListener("click",()=>{e=Math.max(e-1,0),l(e)})}),l(e)}function g(){document.getElementById("close-button").addEventListener("click",function(){let r=document.referrer,i=window.location.hostname,e=null;try{e=r?new URL(r).hostname:null}catch{e=null}window.history.length>1&&e===i?window.history.back():window.location.href="/"})}document.addEventListener("DOMContentLoaded",function(){g(),p(),v(),y(),h("#dates-start-end-group","#Estimated-Start-Date")});})();
